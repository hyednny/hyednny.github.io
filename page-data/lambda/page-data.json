{"componentChunkName":"component---src-templates-post-template-tsx","path":"/lambda/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h3>AWS Lambda 란?</h3>\n<ul>\n<li>\n<p>AWS에서 제공하는 서버리스(개발자가 서버를 관리할 필요 없이 빌드하고 실행할 수 있는 클라우드 네이티브 개발 모델) 컴퓨팅 플랫폼이다.</p>\n</li>\n<li>\n<p>원하는 함수를 작성하고 필요할 때 그 함수를 특정 시기에 호출할 수 있음</p>\n</li>\n</ul>\n<h3>Lambda의 장점</h3>\n<ul>\n<li>비용 절약\n</br> 필요할 때만 함수가 호출되어서 항상 서버를 켜두고 있지 않아도 되므로 비용을 절약할 수 있다.</br></br></li>\n<li>운영 관리 간편\n</br> 서버 자체의 관리는 AWS가 알아서 해주기 때문에 서버를 관리할 필요가 없어서 간편하다.</br></br></li>\n<li>빠르고 쉬운 배포\n</br> 배포 소요 시간이 짧아짐. severless의 강점인 배포 방법도 쉽다.</li>\n</ul>\n<h3>Lambda의 단점</h3>\n<ul>\n<li>리소스 제한\n</br> 함수가 한번 호출될 때 AWS에서는 최대 10GB의 메모리, 처리시간은 최대 15분</br></br></li>\n<li>Stateless (상태 저장 X)\n</br> 함수가 호출되면 새로운 컨테이너를 띄우는 방식이기 때문에 별도의 상태를 저장하지 않는다.\n</br> 함수가 이벤트에 의해 트리거 될 때마다 새로운 환경에서 호출됨</br></br></li>\n<li>ColdStart\n</br> 람다는 리소스를 효율적으로 사용하기 위해서 오랫동안 사용하지 않을 시 잠시 컴퓨팅 파워를 꺼둔다. </br>다시 사용할 때 람다 컨테이너를 띄우기 위해 서버가 켜지고 실행환경을 구성하기 위해 약간의 시간이 걸린다.\n</br>람다를 주기적으로 호출해주는게 좋고 메모리를 늘리면 컴퓨팅 스펙이 높아져서 딜레이가 줄어든다.</li>\n</ul>\n<h3>1. 배포 방식 - Serverless</h3>\n<ul>\n<li>Serverless로 테스트\n</br><a href=\"https://www.serverless.com/framework/docs/providers/aws/cli-reference/invoke-local\" target=\"_blank\" rel=\"nofollow\">https://www.serverless.com/framework/docs/providers/aws/cli-reference/invoke-local</a> </br>\n<code class=\"language-text\">serverless invoke local -f {function name}</code></br></br></li>\n<li>Serverless로 배포\n</br><code class=\"language-text\">sls deploy</code></li>\n</ul>\n<h3>2. 배포 방식 - 도커 이미지 이용해서 <u>수동</u> 업로드</h3>\n<p>용량이 커서 도커 이미지를 이용해서 업로드 한 적이 있다.</p>\n<ol>\n<li>\n<p>git push</p>\n</li>\n<li>\n<p>도커 이미지 생성\n</br><code class=\"language-text\">docker build -t {이름} .</code></br></br></p>\n</li>\n<li>\n<p>로컬 환경에서 람다 돌리기\n</br><code class=\"language-text\">docker run --rm -p 8080:8080 {이름}</code></br></br></p>\n</li>\n<li>\n<p>로컬 환경에서 람다 Test</p>\n<div class=\"gatsby-highlight\" data-language=\"awslambda invoke \\\"><pre class=\"language-awslambda invoke \\\"><code class=\"language-awslambda invoke \\\">--endpointhttp://localhost:8080 \\\n--no-sign-request \\\n--function-name function \\\n--cli-binary-format raw-in-base64-out \\\n--payload &#39;{&quot;a&quot;:&quot;b&quot;}&#39; output.txt\n// 브릿지 연동 로컬 테스트\nnpx serverless invoke local --function {함수 이름}</code></pre></div>\n</li>\n<li>\n<p>AWS ECR 로그인</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">aws ecr get-login-password -region --ap-northeast-2 | docker login --username AWS --password-stdin {2에서 생성한 도커 이미지}\n</code></pre></div>\n</li>\n<li>\n<p>re - tagging the docker image</p>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    docker tag {이름}:latest {2에서 생성한 도커 이미지}</code></pre></div>\n<ol start=\"7\">\n<li>람다 배포</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    docker push {2에서 생성한 도커 이미지}\n    // 2에서 생성한 도커 이미지\n    1234~.dkr.ecr.ap-northeast-2.amazonaws.com/dockerized-lambda:latest</code></pre></div>\n<h3>3. 배포 방식 - 도커 이미지 이용해서 <u>자동</u> 업로드</h3>\n<div class=\"gatsby-highlight\" data-language=\"awslambda create-function \\\"><pre class=\"language-awslambda create-function \\\"><code class=\"language-awslambda create-function \\\">--package-type Image \\\n--function-name {뻥션 네임} \\\n--role {{롤 네임 카피}}\n-- code ImageUri={2에서 생성한 도커 이미지}</code></pre></div>\n</br>\n했더니 이미 생성되어 있다고 오류가 났다.\n그래서 update 방법을 찾아봤다.\n<div class=\"gatsby-highlight\" data-language=\"awslambda update-function-code \\\"><pre class=\"language-awslambda update-function-code \\\"><code class=\"language-awslambda update-function-code \\\">--function-name calculateTokensPrice \\\n--image-uri {2에서 생성한 도커 이미지}</code></pre></div>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/d69449a57b063afa1c7039cb80f288ab/9c796/lambdaDeploy1.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 53.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABkUlEQVR42oVS206DQBTkH9SqBfYCvUO59V5abBttYkz8/78ZMweomGh8mMzusszOmXOc0TRCnOSI0wKD0QRRkiPJl8gWa0RJhnA4hqcMHp/7AtdX0DaEsoGwDkJoG8heGQtntT1gsz9ivTtgsd6JmDahXOZDu8NJhCnkegqjyQzr3RHFaivgP7xDprjDzeH0iuVmD7p96ru47/Vw99CTNYU8pWHCAWw4lId8Y2toA0+b2inPtYGzKStcrh/iMC1WyIqVcL7cCNMF13YwhAmHCAYjAfctfG1FmOzQ6lEclmKdHKfMcSGYZwWSbIFpnGA2T5u8c1nzjGCpN8FJNJdM6IJgXnTgKt0EXYMl8azvK4HbQSsmJdPhclt2BGsHZHEQJTc3fIA/qzbDW5a1mAhSpLpcsT+esS1fpFtsELPjKI1nMcbTSBo2i1MEzRh1RbqQLr+9f6I6X1Gd34TpiPNHHk/j73kLQin/N6GbIMsrq4vMIsviaLAkr8mrzaiF/w8cudTMVD1z7Uf7Y958/XeZXcEvXalBtj9ExJ0AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <picture>\n          <source srcset=\"/static/d69449a57b063afa1c7039cb80f288ab/a59e9/lambdaDeploy1.webp 192w,\n/static/d69449a57b063afa1c7039cb80f288ab/0ca9f/lambdaDeploy1.webp 384w,\n/static/d69449a57b063afa1c7039cb80f288ab/dc9b9/lambdaDeploy1.webp 768w,\n/static/d69449a57b063afa1c7039cb80f288ab/e2c2f/lambdaDeploy1.webp 1152w,\n/static/d69449a57b063afa1c7039cb80f288ab/f3efb/lambdaDeploy1.webp 1536w,\n/static/d69449a57b063afa1c7039cb80f288ab/61637/lambdaDeploy1.webp 1708w\" sizes=\"(max-width: 768px) 100vw, 768px\" type=\"image/webp\">\n          <source srcset=\"/static/d69449a57b063afa1c7039cb80f288ab/3b721/lambdaDeploy1.png 192w,\n/static/d69449a57b063afa1c7039cb80f288ab/66595/lambdaDeploy1.png 384w,\n/static/d69449a57b063afa1c7039cb80f288ab/fe486/lambdaDeploy1.png 768w,\n/static/d69449a57b063afa1c7039cb80f288ab/d2d74/lambdaDeploy1.png 1152w,\n/static/d69449a57b063afa1c7039cb80f288ab/e8464/lambdaDeploy1.png 1536w,\n/static/d69449a57b063afa1c7039cb80f288ab/9c796/lambdaDeploy1.png 1708w\" sizes=\"(max-width: 768px) 100vw, 768px\" type=\"image/png\">\n          <img class=\"gatsby-resp-image-image\" src=\"/static/d69449a57b063afa1c7039cb80f288ab/fe486/lambdaDeploy1.png\" alt=\"lambdaDeploy1\" title=\"lambdaDeploy1\" loading=\"lazy\" decoding=\"async\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n        </picture>\n  </a>\n    </span></img></br>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/a4dc45e97b36f9cce99433a7e596e964/70035/lambdaDeploy2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 4.166666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAABYlAAAWJQFJUiTwAAAANklEQVR42j2KQQoAIAzD/P9TBce8jLkOKqjzUAJNWp9G8yAABnBYi3hfJn0tDpHfVXt5verkBmF8Tj4/vF2QAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <picture>\n          <source srcset=\"/static/a4dc45e97b36f9cce99433a7e596e964/a59e9/lambdaDeploy2.webp 192w,\n/static/a4dc45e97b36f9cce99433a7e596e964/0ca9f/lambdaDeploy2.webp 384w,\n/static/a4dc45e97b36f9cce99433a7e596e964/dc9b9/lambdaDeploy2.webp 768w,\n/static/a4dc45e97b36f9cce99433a7e596e964/e2c2f/lambdaDeploy2.webp 1152w,\n/static/a4dc45e97b36f9cce99433a7e596e964/f3efb/lambdaDeploy2.webp 1536w,\n/static/a4dc45e97b36f9cce99433a7e596e964/10600/lambdaDeploy2.webp 1768w\" sizes=\"(max-width: 768px) 100vw, 768px\" type=\"image/webp\">\n          <source srcset=\"/static/a4dc45e97b36f9cce99433a7e596e964/3b721/lambdaDeploy2.png 192w,\n/static/a4dc45e97b36f9cce99433a7e596e964/66595/lambdaDeploy2.png 384w,\n/static/a4dc45e97b36f9cce99433a7e596e964/fe486/lambdaDeploy2.png 768w,\n/static/a4dc45e97b36f9cce99433a7e596e964/d2d74/lambdaDeploy2.png 1152w,\n/static/a4dc45e97b36f9cce99433a7e596e964/e8464/lambdaDeploy2.png 1536w,\n/static/a4dc45e97b36f9cce99433a7e596e964/70035/lambdaDeploy2.png 1768w\" sizes=\"(max-width: 768px) 100vw, 768px\" type=\"image/png\">\n          <img class=\"gatsby-resp-image-image\" src=\"/static/a4dc45e97b36f9cce99433a7e596e964/fe486/lambdaDeploy2.png\" alt=\"lambdaDeploy2\" title=\"lambdaDeploy2\" loading=\"lazy\" decoding=\"async\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n        </picture>\n  </a>\n    </span></img></br></p>\n<p>위의 사진처럼 배포된 것을 확인 할 수가 있다.</p>","frontmatter":{"title":"AWS Lambda 장단점과 배포 방식 정리","summary":"AWS Lambda","date":"2022.12.21.","categories":["AWS","Web"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABx0lEQVR42o2ST2sTQRyGR0EEhV4F8St48eLBg19BsOJBEdFGEC9aqPRSBEmxkEtOKwkGQYVAIJGGBCRKcgghaANN2KQoNpsETWP+7CotRdPN7CM7bZo/VPAH7zDDvPMwM79XADhS4jiSYTmuHAfkYH/tOIeSUiqp/aFvrMQ4qKXn+Ba4DkZyBD6AHlXTMAV0h+1qgYZ2lY/3z1C6KWBJsBe4CD/WlcmyTLrdLp1Oh2azSa1Wo9/vT9x+OFfAzZcPKF0TFO6cYMMjaL+4QmX5ErvJx8oYeK4RCoXwer34/X58Ph/lclntTX+BAhpv5tFvCdbmTlG5d5za/Aybi+f4mVrBffDnjQr1eh3DMOj1eui6jmVZR36BAlZfP6LsAj2nqXgE1cWzfH16ge3UM3ZtKBXXabVa5PN5stksmUyGRCJBLpcjFouRTqcxTXN0w+qrhxRnBYXbx9DnBLy9wY52GfvDEn+A96l3RKNRgsEg8XicSCRCOBxWcueaptFoNEbA3+Z32qtP+LRwnqLblJWTsHoXdraUybb3GAz+3e2JJ4+3/ld7i25yGawv+5FRJjlxYLqr0xESHBySA3si2EjbDeFhyP9HLvAvoWfHeVDupJEAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/51581a9b510d6f73bc36015c84a5294f/5e666/lambda.png","srcSet":"/static/51581a9b510d6f73bc36015c84a5294f/ddd18/lambda.png 163w,\n/static/51581a9b510d6f73bc36015c84a5294f/47852/lambda.png 325w,\n/static/51581a9b510d6f73bc36015c84a5294f/5e666/lambda.png 650w","sizes":"(min-width: 650px) 650px, 100vw"},"sources":[{"srcSet":"/static/51581a9b510d6f73bc36015c84a5294f/ae818/lambda.webp 163w,\n/static/51581a9b510d6f73bc36015c84a5294f/d6b8a/lambda.webp 325w,\n/static/51581a9b510d6f73bc36015c84a5294f/aed9f/lambda.webp 650w","type":"image/webp","sizes":"(min-width: 650px) 650px, 100vw"}]},"width":650,"height":340}},"publicURL":"/static/51581a9b510d6f73bc36015c84a5294f/lambda.png"}}}}]}},"pageContext":{"slug":"/lambda/"}},"staticQueryHashes":[],"slicesMap":{}}